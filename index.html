<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ò£</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–¢–û –í–°–ï –ú–ù–ï?</title>
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&family=Press+Start+2P&family=Stalinist+One&display=swap" rel="stylesheet">
    
<style>
    :root {
        --text-main: #ffffff;
        --text-sec: #b0b0b0;
        --accent-grad: linear-gradient(90deg, #00FFA3 0%, #00B8FF 100%); 
        --accent-rgb: 0, 255, 163; 
        --card-grad: linear-gradient(180deg, rgba(20, 30, 25, 0.8) 0%, rgba(5, 10, 5, 0.9) 100%);
        --bg-deep: #020502;
        
        --font-logo: 'Stalinist One', cursive;
        --font-head: 'Press Start 2P', cursive;
        --font-body: 'JetBrains Mono', monospace;
    }

    body {
        font-family: var(--font-body);
        background-color: var(--bg-deep);
        background-image: radial-gradient(circle at 50% -20%, #004a30 0%, #000000 60%);
        color: var(--text-main);
        margin: 0; padding: 0;
        min-height: 100vh;
        background-attachment: fixed;
        overflow-x: hidden; /* –ß—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–ª–∞–∑–∏–ª–æ –∑–∞ –∫—Ä–∞—è */
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 15px 100px;
    }

    /* --- –®–ê–ü–ö–ê --- */
    header.profile-card {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 30px;
        max-width: 900px;
        margin: 40px auto 30px;
        padding: 30px;
        background: rgba(5, 15, 10, 0.8);
        border: 1px solid rgba(0, 255, 163, 0.2);
        border-radius: 20px;
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
    }
    
    .avatar {
        width: 120px; height: 120px;
        object-fit: cover;
        border-radius: 15px;
        border: 2px solid #00FFA3;
        box-shadow: 0 0 15px rgba(0, 255, 163, 0.3);
    }
    
    h1 {
        font-family: var(--font-logo);
        font-size: 2rem;
        line-height: 1.1;
        margin: 0 0 15px 0;
        color: #00FFA3;
        text-shadow: 0 0 10px rgba(0, 255, 163, 0.5);
        text-transform: uppercase;
    }
    
    .terminal-box {
        background: #000;
        border-left: 3px solid #00FFA3;
        padding: 15px;
        border-radius: 4px;
        font-size: 0.85rem;
        color: #b0fce0;
        min-height: 80px;
        box-shadow: inset 0 0 15px rgba(0, 50, 20, 0.4);
    }

    .cursor {
        display: inline-block;
        width: 8px; height: 15px;
        background: #00FFA3;
        animation: blink 1s step-end infinite;
    }
    
    @keyframes blink { 50% { opacity: 0; } }

    /* --- –ú–û–ë–ò–õ–¨–ù–ê–Ø –ê–î–ê–ü–¢–ê–¶–ò–Ø (–§–ò–ö–°) --- */
    @media (max-width: 768px) {
        header.profile-card {
            flex-direction: column;
            text-align: center;
            margin: 20px 10px;
            padding: 20px;
            gap: 20px;
        }
        h1 {
            font-size: 1.2rem; /* –£–º–µ–Ω—å—à–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ */
            letter-spacing: 0;
        }
        .avatar { width: 100px; height: 100px; }
        .terminal-box { font-size: 0.75rem; text-align: left; }
    }

    /* --- –¢–ê–ë–´ (–ú–ï–ù–Æ) --- */
    .tabs-container {
        position: sticky; top: 15px; z-index: 100;
        background: rgba(0, 5, 0, 0.8);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 255, 163, 0.3);
        border-radius: 50px;
        padding: 8px;
        max-width: fit-content;
        margin: 0 auto 40px;
        display: flex; gap: 5px; flex-wrap: wrap; justify-content: center;
    }

    .tab-btn {
        background: transparent; border: none;
        color: #888; padding: 8px 16px; 
        border-radius: 25px; cursor: pointer;
        font-family: var(--font-body); font-weight: bold; font-size: 0.75rem;
        transition: 0.3s;
    }

    .tab-btn.active { background: var(--accent-grad); color: #000; box-shadow: 0 0 15px rgba(0, 255, 163, 0.4); }

    /* --- –°–ï–¢–ö–ê –¢–û–í–ê–†–û–í --- */
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 25px;
    }

    .card {
        background: var(--card-grad);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        overflow: hidden;
        transition: 0.3s;
        display: flex; flex-direction: column;
    }
    .card:hover { transform: translateY(-5px); border-color: rgba(0, 255, 163, 0.4); }

    .card-img { width: 100%; height: 250px; object-fit: cover; }
    .card-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
    .card-tag { color: #00FFA3; font-size: 0.7rem; font-weight: bold; margin-bottom: 8px; }
    .card-title { font-size: 1.1rem; margin-bottom: 10px; color: #fff; }
    .card-price { font-family: var(--font-head); font-size: 0.9rem; color: #aaa; margin-bottom: 20px; }

    .actions { display: flex; gap: 10px; height: 45px; }
    .btn-link { 
        flex: 0 0 45px; display: flex; align-items: center; justify-content: center;
        background: rgba(255,255,255,0.05); border-radius: 10px; text-decoration: none; color: #fff;
    }
    .btn-reserve {
        flex-grow: 1; background: var(--accent-grad); border: none; border-radius: 10px;
        font-family: var(--font-head); font-size: 0.7rem; font-weight: bold; cursor: pointer;
    }

    .badge {
        position: absolute; top: 10px; right: 10px; padding: 5px 10px;
        font-family: var(--font-head); font-size: 0.6rem; color: #fff; border-radius: 5px;
    }
    .badge.res { background: #ffaa00; }
    .badge.done { background: #333; }
    .card.inactive { opacity: 0.5; filter: grayscale(1); pointer-events: none; }
</style>
</head>
<body>

<div class="container">
    <header class="profile-card">
        <img src="avatar.jpg" alt="Avatar" class="avatar">
        <div class="info-container">
            <h1>–ê–í–¢–û–†–ò–¢–ï–¢–ù–´–ô –°–ü–ò–°–û–ö –ñ–ï–õ–ê–ù–ò–ô</h1>
            <div class="terminal-box">
                <span id="typewriter-text"></span><span class="cursor"></span>
            </div>
        </div>
    </header>

    <div id="tabs-container" class="tabs-container"></div>
    <div id="main-container"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.7/dayjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.7/plugin/customParseFormat.min.js"></script>

<script>
    const GOOGLE_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQvLAOYfzwxm-Js6_6R2Qz0Mu4sSoPyegl5uF20XgtVqGSHKfL8QxYBvY762SaH5FLCe5BVXAX1l6pc/pub?output=csv";
    const BOT_TOKEN = "8594440034:AAGUio2Ujey_v0FiFds1dDqrqNEYwRmL1zw";
    const CHAT_ID = "792924865";

    dayjs.extend(window.dayjs_plugin_customParseFormat);
    let allItems = [];

    // --- –ü–ï–ß–ê–¢–ù–ê–Ø –ú–ê–®–ò–ù–ö–ê ---
    const textLines = [
        "> –†–∞–±–∏–Ω–æ–≤–∏—á, –≤—ã –ø—Ä–∞–∑–¥–Ω—É–µ—Ç–µ –ù–æ–≤—ã–π –≥–æ–¥?", 
        "> –ú—ã ‚Äì –µ–≤—Ä–µ–∏, –ø–æ—ç—Ç–æ–º—É ‚Äì –Ω–µ—Ç.",
        "> –¢–∞–∫ —á—Ç–æ –ø–æ–¥–∞—Ä–∫–æ–≤ –Ω–µ –¥–∞—Ä–∏–º.",
        "> –ù–æ –º—ã —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω—ã–µ –µ–≤—Ä–µ–∏, –ø–æ—ç—Ç–æ–º—É –ø–æ–¥–∞—Ä–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ–º."
    ];
    let lineIdx = 0, charIdx = 0;
    const textEl = document.getElementById("typewriter-text");

    function typeWriter() {
        if (lineIdx < textLines.length) {
            if (charIdx < textLines[lineIdx].length) {
                textEl.innerHTML += textLines[lineIdx].charAt(charIdx);
                charIdx++; setTimeout(typeWriter, 40);
            } else {
                textEl.innerHTML += "<br>"; lineIdx++; charIdx = 0;
                setTimeout(typeWriter, 500);
            }
        }
    }

    function loadWishlist() {
        Papa.parse(GOOGLE_SHEET_URL, {
            download: true, header: true,
            complete: (res) => {
                allItems = res.data.filter(i => i.name);
                initSystem();
            }
        });
    }

    function initSystem() {
        const tabs = document.getElementById('tabs-container');
        const cats = new Set(['–í–°–ï']);
        allItems.forEach(i => cats.add(i.category?.trim().toUpperCase() || '–†–ê–ó–ù–û–ï'));
        
        tabs.innerHTML = '';
        cats.forEach(c => {
            const btn = document.createElement('button');
            btn.className = 'tab-btn' + (c === '–í–°–ï' ? ' active' : '');
            btn.innerText = c;
            btn.onclick = () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderGrid(c);
            };
            tabs.appendChild(btn);
        });
        renderGrid('–í–°–ï');
        typeWriter();
    }

    function renderGrid(cat) {
        const container = document.getElementById('main-container');
        container.innerHTML = '<div class="grid"></div>';
        const grid = container.querySelector('.grid');

        let filtered = allItems.filter(i => cat === '–í–°–ï' || (i.category?.trim().toUpperCase() || '–†–ê–ó–ù–û–ï') === cat);
        
        filtered.sort((a,b) => (getItemStatus(a).type === 'FREE' ? -1 : 1));

        filtered.forEach(item => {
            const status = getItemStatus(item);
            const card = document.createElement('div');
            card.className = `card ${status.type !== 'FREE' ? 'inactive' : ''}`;
            card.innerHTML = `
                ${status.badge}
                <img src="${item.image || 'https://via.placeholder.com/300x250/000/00FFA3?text=NO+IMAGE'}" class="card-img">
                <div class="card-content">
                    <div class="card-tag">${item.category || '–†–∞–∑–Ω–æ–µ'}</div>
                    <div class="card-title">${item.name}</div>
                    <div class="card-price">${item.price}</div>
                    <div class="actions">
                        ${item.link && status.type === 'FREE' ? `<a href="${item.link}" target="_blank" class="btn-link">üîó</a>` : ''}
                        <button class="btn-reserve" onclick="bookItem('${item.name}', this)" ${status.type !== 'FREE' ? 'disabled' : ''}>
                            ${status.text}
                        </button>
                    </div>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    function getItemStatus(item) {
        const s = item.status?.trim().toUpperCase() || '';
        if (s === 'BOUGHT' || s === 'TRUE') return { type: 'DONE', text: '–ü–û–î–ê–†–ï–ù–û', badge: '<div class="badge done">SOLD</div>' };
        if (s.includes('.')) return { type: 'RES', text: '–ó–ê–ù–Ø–¢–û', badge: '<div class="badge res">–ë–†–û–ù–¨</div>' };
        return { type: 'FREE', text: '–ó–ê–ë–†–û–ù–ò–†–û–í–ê–¢–¨', badge: '' };
    }

    function bookItem(name, btn) {
        if (!confirm(`–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å "${name}"?`)) return;
        btn.innerText = "–û–¢–ü–†–ê–í–ö–ê...";
        fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ chat_id: CHAT_ID, text: `üö® –ë–†–û–ù–¨: ${name}`, parse_mode: 'HTML' })
        }).then(() => {
            alert("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!");
            btn.innerText = "–ì–û–¢–û–í–û";
        });
    }

    loadWishlist();
</script>
</body>
</html>

